# MyBlog 博客系统

## 一、项目介绍

MyBlog 是一个基于 Spring Boot 构建的博客系统，提供了文章管理、用户管理、文章审核、分类管理等功能，同时支持 JWT 认证和阿里云 OSS 存储。以下是项目中重要文件及模块的详细介绍：

### 1. 核心配置文件

- **pom.xml**：Maven 项目的核心配置文件，定义了项目的依赖管理和模块信息。通过它可以管理项目所需的各种依赖库，如 Spring Boot、MyBatis、Lombok 等。
- **`application.yml`**：Spring Boot 项目的配置文件，包含了数据库连接、MyBatis 配置、JWT 配置、日志级别等信息。例如，配置了 MyBatis 的 mapper 位置、JWT 的密钥和过期时间等。

### 2. 工具类文件

- **JwtUtil.java**：用于生成和解析 JWT 令牌。在用户登录成功后，生成包含用户信息的 JWT 令牌，后续请求通过解析该令牌来验证用户身份。
- **AliOssUtil.java**：封装了阿里云 OSS 的操作，实现文件的上传功能。在文章上传图片等场景中使用，将文件存储到阿里云 OSS 上。
- **MessageUtils.java**：用于生成消息的工具类，将消息对象转换为 JSON 字符串，方便在系统中传递消息。

### 3. Controller 文件

- **ArticleController**：处理文章相关的请求，包括文章的增删改查、草稿管理、回收站管理、文章点赞和访问量统计等功能。同时，还提供了文章审核和分类管理的接口。
- **UserController：处理用户相关的请求，如用户登录、注册、退出登录、获取系统消息、添加专题、关注用户、发送私信等功能。
- **CommentController**实现了评论的增删改查、点赞、举报等功能
- **CommonController**：处理通用的请求，如文件上传功能，将文件上传到阿里云 OSS 上。
- **JwtTokenController**：用于解析 JWT 令牌，从令牌中获取用户 ID。

### 4. Mapper 文件

- **UserMapper.java**：定义了与用户相关的数据库操作接口，如根据用户名查询用户、用户注册、获取用户角色列表、获取系统消息等。
- **CommentMapper**:定义了与评论相关的数据库接口
- **ArticleMapper**:定义了与文章相关的数据库接口

### 5. Service 文件

1. #### **ArticleService**:

- **文章筛选和排序查询**：根据分类 ID、标签 ID、发布时间等条件筛选文章，并支持按照指定字段和顺序进行排序。
- **文章操作**：支持文章的插入、删除、更新和查询操作，同时还提供了草稿文章的管理功能，包括添加草稿和获取草稿列表。
- **文章回收站管理**：支持将文章移入回收站、从回收站恢复文章以及永久删除文章的操作，还能清理超过 7 天的回收站文章。
- **文章点赞和访问量统计**：使用 Redis 缓存文章的点赞量和访问量，支持增加和减少点赞量、获取点赞量和访问量，并提供定时任	务将缓存中的数据同步到数据库。
- **文章分类管理**：支持插入文章分类和查询指定分类的子分类。
- **文章审核管理**：支持添加待审核文章到 Redis，获取待审核文章列表，审核文章（通过或拒绝），并在审核通过或拒绝时发送系	统消息通知作者。

​    2.**CommentService**：

- **评论操作**：支持评论的插入、删除和查询操作，可根据文章 ID 获取评论列表。
- **评论点赞统计**：使用 Redis 缓存评论的点赞量，支持增加和减少点赞量、获取点赞量，并提供定时任务将缓存中的数据同步到数据库。
- **评论举报管理**：支持添加评论举报信息、获取待处理的评论举报列表以及处理评论举报。

​    3.**UserService**

- **用户认证**：支持用户登录和注册功能，登录时进行密码验证，注册时进行密码加密。
- **用户角色管理**：根据用户 ID 获取用户角色。
- **用户消息管理**：支持获取用户的系统消息和未读消息数量，同时支持添加系统消息。
- **话题管理**：支持添加话题和将文章添加到话题中，还能根据话题 ID 获取文章列表。
- **用户关注管理**：支持用户关注其他用户，以及获取用户的关注列表和粉丝列表。
- **私信管理**：支持用户发送私信和获取对话记录。

## 二、使用的技术栈

### 后端技术栈

- **Spring Boot**：简化 Spring 应用的开发，提供了快速搭建项目的能力，内置了 Tomcat 服务器，方便开发和部署。
- **MyBatis**：优秀的持久层框架，通过 XML 或注解的方式实现 SQL 语句的映射，简化了数据库操作。
- **MySQL**：与 MySQL 数据库进行交互，实现数据的传输和存储。
- **Maven**：项目管理和构建工具，用于管理项目的依赖和构建过程。
- **JWT（JSON Web Token）**：用于实现用户认证和授权，通过生成和验证令牌来确保用户的身份安全。
- **阿里云 OSS**：提供了可靠的文件存储服务，用于存储文章中的图片等文件。
- **Redis**：，用于缓存数据，提高系统的响应速度。
- **Hutool工具包**： Java 工具类库，提供了丰富的工具方法，方便开发人员进行开发，如发送和处理http请求等。

## 三、项目亮点

### 1. 权限管理

通过 自定义`@RequiredRoles` 注解实现了细粒度的权限管理，不同角色的用户具有不同的操作权限，如普通用户只能进行文章的增删改查和点赞等操作，而管理员可以进行文章审核和分类管理等操作，提高了系统的安全性。

### 2. 文章审核机制

引入了文章审核机制，待审文章会被添加到 Redis 中，管理员可以对文章进行审核，审核通过或拒绝后会发送消息通知用户，同时更新文章的状态，保证了文章的质量。

### 3. 缓存和统计功能

使用 Redis 缓存文章的点赞量和访问量，提高了系统的性能和响应速度。同时，在用户访问文章时，自动增加文章的访问量，方便统计文章的热度。

### 4. 集成第三方登录

支持 GitHub 第三方登录，用户可以使用 GitHub 账号快速登录系统，提高了用户体验。

### 5. 定时任务

通过 `@Scheduled` 注解实现定时任务，如每天凌晨 2 点执行清理回收站中过期文章的任务，确保系统资源的有效利用。

## 四、学习心得

### 1. 新的技术栈学习

- **JWT 认证**：通过使用 JWT 实现用户认证和授权，了解了如何生成和验证令牌，以及如何在请求中传递和解析令牌，提高了系统的安全性和可扩展性。
- **阿里云 OSS**：学习了如何使用阿里云 OSS 进行文件存储，掌握了文件上传和下载的基本操作，解决了文件存储的问题。

### 2. 项目深入了解

通过参与这个项目，对 Spring Boot 和 MyBatis 的使用有了更深入的理解，掌握了如何使用它们来构建一个完整的 Web 应用。同时，也了解了项目的整体架构和设计思路，学会了如何进行模块划分和代码组织。

### 3. 自身不足

- **性能优化经验不足**：在处理高并发场景时，对系统的性能优化经验不足，需要学习更多的性能优化技巧和方法，如缓存、负载均衡等。
- **代码规范和注释**：在代码编写过程中，有时会忽略代码规范和注释的重要性，导致代码的可读性和可维护性较差，需要养成良好的代码编写习惯。

### 4. 感悟

​	这次考核的难度比寒假的难了好几个档次，不仅是技术栈的加深，还有业务逻辑也有点难，本来想用mq进行聊天室和通知的开发，但是发现单体架构应用这个有点困难，下次会尽量试试的。最近这几天每天写到半夜三四点，虽然有点累，但是写出来的成就感还是很高的，尤其是应用一些新的技术栈并且成功了之后。虽然知道写的东西都很基础，但是我对开发这方面确实很有兴趣，有意向想学习更多的开发知识和技术，这也是我想进蓝山的一个重要原因。

### 5.说明

​	我想进蓝山的原因：

​	首先就是比较现实的，我是想本科毕业直接就业的，所以想多学些技术，多做些项目，所以想参加工作室进行一个实际开发，并且感觉工作室都是大佬，想要向各位学习更多的技术。我已经大二了，马上就大三，确实该为自己未来好好计划一下了。

​	然后就是我个人觉得蓝山工作室的氛围非常好，我的同学和室友都有蓝山的，基本每个部门的人我都认识一些，跟他们接触下来感觉蓝山的氛围还是很自由的，里面的人也都挺有意思的，我也进工作室里面参观过几次，感觉还是挺好的。

​	最后就是其实我没怎么参加过团体性的活动，团队协作经验比较少，所以想进工作室丰富一下自己的经历，感受一下团队的氛围，所以我一定会积极融洽的和各位相处，努力干活，积极沟通，不扫兴，和大家一起努力！

